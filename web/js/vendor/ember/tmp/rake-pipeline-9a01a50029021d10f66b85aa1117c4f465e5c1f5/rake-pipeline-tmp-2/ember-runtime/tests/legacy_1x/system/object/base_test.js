minispade.register('ember-runtime/~tests/legacy_1x/system/object/base_test', "(function() {// ==========================================================================\n// Project:  Ember Runtime\n// Copyright: ©2006-2011 Strobe Inc. and contributors.\n//            ©2008-2011 Apple Inc. All rights reserved.\n// License:   Licensed under MIT license (see license.js)\n// ==========================================================================\n/*globals TestNamespace:true*/\n\n/*\n  NOTE: This test is adapted from the 1.x series of unit tests.  The tests\n  are the same except for places where we intend to break the API we instead\n  validate that we warn the developer appropriately.\n\n  CHANGES FROM 1.6:\n\n  * Changed get(obj, ) and set(obj, ) to Ember.get() and Ember.set()\n  * Removed obj.instanceOf() and obj.kindOf() tests.  use obj instanceof Foo\n    instead\n  * Removed respondsTo() and tryToPerform() tests.  Can be brought back in a\n    utils package.\n  * Removed destroy() test.  You can impl yourself but not built in\n  * Changed Class.subclassOf() test to Class.detect()\n  * Remove broken test for 'superclass' property.\n  * Removed obj.didChangeFor()\n*/\n\n// ========================================================================\n// Ember.Object Base Tests\n// ========================================================================\n\nvar obj, obj1, don, don1 ; // global variables\n\nvar get = Ember.get, set = Ember.set;\n\nfunction inArray(item, array) {\n  var len = array.length, idx;\n  for (idx=0; idx<len; idx++) {\n    if (array[idx] === item) { return idx; }\n  }\n  return -1;\n}\n\nmodule(\"A new Ember.Object instance\", {\n\n  setup: function() {\n    obj = Ember.Object.create({\n      foo: \"bar\",\n      total: 12345,\n      aMethodThatExists: function() {},\n      aMethodThatReturnsTrue: function() { return true; },\n      aMethodThatReturnsFoobar: function() { return \"Foobar\"; },\n      aMethodThatReturnsFalse: function() { return false; }\n    });\n  },\n\n  teardown: function() {\n    obj = undefined ;\n  }\n\n});\n\ntest(\"Should return it's properties when requested using Ember.Object#get\", function() {\n  equal(get(obj, 'foo'), 'bar') ;\n  equal(get(obj, 'total'), 12345) ;\n});\n\ntest(\"Should allow changing of those properties by calling Ember.Object#set\", function() {\n  equal(get(obj,'foo'), 'bar') ;\n  equal(get(obj, 'total'), 12345) ;\n\n  set(obj,  'foo', 'Chunky Bacon' ) ;\n  set(obj,  'total', 12 ) ;\n\n  equal(get(obj, 'foo'), 'Chunky Bacon') ;\n  equal(get(obj, 'total'), 12) ;\n});\n\n\nmodule(\"Ember.Object observers\", {\n  setup: function() {\n    // create a namespace\n    TestNamespace = {\n      obj: Ember.Object.create({\n        value: \"test\"\n      })\n    };\n\n    // create an object\n    obj = Ember.Object.create({\n      prop1: null,\n\n      // normal observer\n      observer: Ember.observer(function(){\n        this._normal = true;\n      }, \"prop1\"),\n\n      globalObserver: Ember.observer(function() {\n        this._global = true;\n      }, \"TestNamespace.obj.value\"),\n\n      bothObserver: Ember.observer(function() {\n        this._both = true;\n      }, \"prop1\", \"TestNamespace.obj.value\")\n    });\n\n  }\n});\n\ntest(\"Local observers work\", function() {\n  obj._normal = false;\n  set(obj, \"prop1\", false);\n  equal(obj._normal, true, \"Normal observer did change.\");\n});\n\ntest(\"Global observers work\", function() {\n  obj._global = false;\n  set(TestNamespace.obj, \"value\", \"test2\");\n  equal(obj._global, true, \"Global observer did change.\");\n});\n\ntest(\"Global+Local observer works\", function() {\n  obj._both = false;\n  set(obj, \"prop1\", false);\n  equal(obj._both, true, \"Both observer did change.\");\n});\n\n\n\nmodule(\"Ember.Object superclass and subclasses\", {\n  setup: function() {\n    obj = Ember.Object.extend ({\n    method1: function() {\n      return \"hello\";\n    }\n\t});\n\tobj1 = obj.extend();\n\tdon = obj1.create ({\n    method2: function() {\n      return this.superclass();\n    }\n\t});\n  },\n\n  teardown: function() {\n\tobj = undefined ;\n    obj1 = undefined ;\n    don = undefined ;\n  }\n});\n\ntest(\"Checking the detect() function on an object and its subclass\", function(){\n\tequal(obj.detect(obj1), true);\n\tequal(obj1.detect(obj), false);\n});\n\ntest(\"Checking the detectInstance() function on an object and its subclass\", function() {\n  ok(Ember.Object.detectInstance(obj.create()));\n  ok(obj.detectInstance(obj.create()));\n});\n\n})();\n//@ sourceURL=ember-runtime/~tests/legacy_1x/system/object/base_test");