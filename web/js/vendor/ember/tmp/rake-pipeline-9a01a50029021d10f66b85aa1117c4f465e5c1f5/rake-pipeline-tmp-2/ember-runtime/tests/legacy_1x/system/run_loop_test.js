minispade.register('ember-runtime/~tests/legacy_1x/system/run_loop_test', "(function() {// ==========================================================================\n// Project:  Ember Runtime\n// Copyright: ©2006-2011 Strobe Inc. and contributors.\n//            ©2008-2011 Apple Inc. All rights reserved.\n// License:   Licensed under MIT license (see license.js)\n// ==========================================================================\n\n/*\n  NOTE: This test is adapted from the 1.x series of unit tests.  The tests\n  are the same except for places where we intend to break the API we instead\n  validate that we warn the developer appropriately.\n\n  CHANGES FROM 1.6:\n\n  * Updated the API usage for setting up and syncing Ember.Binding since these\n    are not the APIs this file is testing.\n\n  * Disabled a call to invokeOnce() around line 127 because it appeared to be\n    broken anyway.  I don't think it ever even worked.\n*/\n\nvar MyApp, binding1, binding2, previousPreventRunloop;\n\nmodule(\"System:run_loop() - chained binding\", {\n  setup: function() {\n    MyApp = {};\n    MyApp.first = Ember.Object.create(Ember.Observable, {\n      output: 'MyApp.first'\n    }) ;\n\n    MyApp.second = Ember.Object.create(Ember.Observable, {\n      input: 'MyApp.second',\n      output: 'MyApp.second',\n\n      inputDidChange: Ember.observer(function() {\n        this.set(\"output\", this.get(\"input\")) ;\n      }, \"input\")\n\n    }) ;\n\n    MyApp.third = Ember.Object.create(Ember.Observable, {\n      input: \"MyApp.third\"\n    }) ;\n  }\n});\n\ntest(\"Should propagate bindings after the RunLoop completes (using Ember.RunLoop)\", function() {\n  Ember.TESTING_DEPRECATION = true;\n\n  Ember.run(function () {\n\n    //Binding of output of MyApp.first object to input of MyApp.second object\n      binding1 = Ember.Binding.from(\"first.output\")\n        .to(\"second.input\").connect(MyApp) ;\n\n    //Binding of output of MyApp.second object to input of MyApp.third object\n    binding2 = Ember.Binding.from(\"second.output\")\n      .to(\"third.input\").connect(MyApp) ;\n\n    Ember.run.sync();\n\n    // Based on the above binding if you change the output of MyApp.first\n    // object it should change the all the variable of\n    //  MyApp.first,MyApp.second and MyApp.third object\n    MyApp.first.set(\"output\", \"change\") ;\n\n    //Changes the output of the MyApp.first object\n    equal(MyApp.first.get(\"output\"), \"change\") ;\n\n    //since binding has not taken into effect the value still remains as change.\n    equal(MyApp.second.get(\"output\"), \"MyApp.first\") ;\n\n  }); // allows bindings to trigger...\n\n  //Value of the output variable changed to 'change'\n  equal(MyApp.first.get(\"output\"), \"change\") ;\n\n  //Since binding triggered after the end loop the value changed to 'change'.\n  equal(MyApp.second.get(\"output\"), \"change\") ;\n\n  Ember.TESTING_DEPRECATION = false;\n  \n});\n\ntest(\"Should propagate bindings after the RunLoop completes\", function() {\n  Ember.TESTING_DEPRECATION = false;\n\n  Ember.run(function () {\n    //Binding of output of MyApp.first object to input of MyApp.second object\n    binding1 = Ember.Binding.from(\"first.output\")\n      .to(\"second.input\").connect(MyApp) ;\n\n    //Binding of output of MyApp.second object to input of MyApp.third object\n    binding2 = Ember.Binding.from(\"second.output\")\n        .to(\"third.input\").connect(MyApp) ;\n  });\n\n  Ember.run(function () {\n    //Based on the above binding if you change the output of MyApp.first object it should\n    //change the all the variable of MyApp.first,MyApp.second and MyApp.third object\n    MyApp.first.set(\"output\", \"change\") ;\n\n    //Changes the output of the MyApp.first object\n    equal(MyApp.first.get(\"output\"), \"change\") ;\n\n    //since binding has not taken into effect the value still remains as change.\n    equal(MyApp.second.get(\"output\"), \"MyApp.first\") ;\n  });\n\n  //Value of the output variable changed to 'change'\n  equal(MyApp.first.get(\"output\"), \"change\") ;\n\n  //Since binding triggered after the end loop the value changed to 'change'.\n  equal(MyApp.second.get(\"output\"), \"change\") ;\n\n  Ember.TESTING_DEPRECATION = false;\n});\n\n})();\n//@ sourceURL=ember-runtime/~tests/legacy_1x/system/run_loop_test");