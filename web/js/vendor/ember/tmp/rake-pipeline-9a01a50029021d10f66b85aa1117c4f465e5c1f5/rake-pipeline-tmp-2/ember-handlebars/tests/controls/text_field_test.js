minispade.register('ember-handlebars/~tests/controls/text_field_test', "(function() {// ==========================================================================\n// Project:   Ember Handlebars Views\n// Copyright: Â©2011 Strobe Inc. and contributors.\n// License:   Licensed under MIT license (see license.js)\n// ==========================================================================\n/*globals TestObject:true */\n\nvar textField;\nvar get = Ember.get, set = Ember.set;\n\nmodule(\"Ember.TextField\", {\n  setup: function() {\n    TestObject = Ember.Object.create({\n      value: null\n    });\n\n    textField = Ember.TextField.create();\n  },\n\n  teardown: function() {\n    Ember.run(function() {\n      textField.destroy();\n    });\n    TestObject = textField = null;\n  }\n});\n\nfunction append() {\n  Ember.run(function() {\n    textField.appendTo('#qunit-fixture');\n  });\n}\n\ntest(\"should become disabled if the disabled attribute is true\", function() {\n  textField.set('disabled', true);\n  append();\n\n  ok(textField.$().is(\":disabled\"));\n});\n\ntest(\"should become disabled if the disabled attribute is true\", function() {\n  append();\n  ok(textField.$().is(\":not(:disabled)\"));\n\n  Ember.run(function() { textField.set('disabled', true); });\n  ok(textField.$().is(\":disabled\"));\n\n  Ember.run(function() { textField.set('disabled', false); });\n  ok(textField.$().is(\":not(:disabled)\"));\n});\n\ntest(\"input value is updated when setting value property of view\", function() {\n  Ember.run(function() {\n    set(textField, 'value', 'foo');\n    textField.append();\n  });\n\n  equal(textField.$().val(), \"foo\", \"renders text field with value\");\n\n  Ember.run(function() { set(textField, 'value', 'bar'); });\n\n  equal(textField.$().val(), \"bar\", \"updates text field after value changes\");\n});\n\ntest(\"input placeholder is updated when setting placeholder property of view\", function() {\n  Ember.run(function() {\n    set(textField, 'placeholder', 'foo');\n    textField.append();\n  });\n\n  equal(textField.$().attr('placeholder'), \"foo\", \"renders text field with placeholder\");\n\n  Ember.run(function() { set(textField, 'placeholder', 'bar'); });\n\n  equal(textField.$().attr('placeholder'), \"bar\", \"updates text field after placeholder changes\");\n});\n\ntest(\"input maxlength is updated when setting maxlength property of view\", function() {\n  Ember.run(function() {\n    set(textField, 'maxlength', '30');\n    textField.append();\n  });\n\n  equal(textField.$().attr('maxlength'), \"30\", \"renders text field with maxlength\");\n\n  Ember.run(function() { set(textField, 'maxlength', '40'); });\n\n  equal(textField.$().attr('maxlength'), \"40\", \"updates text field after maxlength changes\");\n});\n\ntest(\"input size is updated when setting size property of view\", function() {\n  Ember.run(function() {\n    set(textField, 'size', '30');\n    textField.append();\n  });\n\n  equal(textField.$().attr('size'), \"30\", \"renders text field with size\");\n\n  Ember.run(function() { set(textField, 'size', '40'); });\n\n  equal(textField.$().attr('size'), \"40\", \"updates text field after size changes\");\n});\n\ntest(\"input tabindex is updated when setting tabindex property of view\", function() {\n  Ember.run(function() {\n    set(textField, 'tabindex', '5');\n    textField.append();\n  });\n\n  equal(textField.$().attr('tabindex'), \"5\", \"renders text field with the tabindex\");\n\n  Ember.run(function() { set(textField, 'tabindex', '3'); });\n\n  equal(textField.$().attr('tabindex'), \"3\", \"updates text field after tabindex changes\");\n});\n\ntest(\"input type is configurable when creating view\", function() {\n  Ember.run(function() {\n    set(textField, 'type', 'password');\n    textField.append();\n  });\n\n  equal(textField.$().attr('type'), 'password', \"renders text field with type\");\n});\n\ntest(\"value binding works properly for inputs that haven't been created\", function() {\n\n  Ember.run(function() {\n    textField = Ember.TextField.create({\n      valueBinding: 'TestObject.value'\n    });\n  });\n\n  equal(get(textField, 'value'), null, \"precond - default value is null\");\n  equal(textField.$(), undefined, \"precond - view doesn't have its layer created yet, thus no input element\");\n\n  Ember.run(function() {\n    set(TestObject, 'value', 'ohai');\n  });\n\n  equal(get(textField, 'value'), 'ohai', \"value property was properly updated\");\n\n  Ember.run(function() { textField.append(); });\n\n  equal(get(textField, 'value'), 'ohai', \"value property remains the same once the view has been appended\");\n  equal(textField.$().val(), 'ohai', \"value is reflected in the input element once it is created\");\n});\n\ntest(\"should call the insertNewline method when return key is pressed\", function() {\n  var wasCalled;\n  var event = Ember.Object.create({\n    keyCode: 13\n  });\n\n  Ember.run(function() { textField.append(); });\n\n  textField.insertNewline = function() {\n    wasCalled = true;\n  };\n\n  textField.trigger('keyUp', event);\n  ok(wasCalled, \"invokes insertNewline method\");\n});\n\ntest(\"should call the cancel method when escape key is pressed\", function() {\n  var wasCalled;\n  var event = Ember.Object.create({\n    keyCode: 27\n  });\n\n  Ember.run(function() { textField.append(); });\n\n  textField.cancel = function() {\n    wasCalled = true;\n  };\n\n  textField.trigger('keyUp', event);\n  ok(wasCalled, \"invokes cancel method\");\n});\n\n// test(\"listens for focus and blur events\", function() {\n//   var focusCalled = 0;\n//   var blurCalled = 0;\n\n//   textField.focus = function() {\n//     focusCalled++;\n//   };\n//   textField.blur = function() {\n//     blurCalled++;\n//   };\n\n//   equal(focusCalled+blurCalled, 0, \"precond - no callbacks called yet\");\n\n//   textField.$().focus();\n//   equal(focusCalled, 1, \"focus called after field receives focus\");\n\n//   textField.$().blur();\n//   equal(blurCalled, 1, \"blur alled after field blurs\");\n// });\n\n// test(\"calls correct method for key events\", function() {\n//   var insertNewlineCalled = 0;\n//   var cancelCalled = 0;\n\n//   textField.insertNewline = function() {\n//     insertNewlineCalled++;\n//     return true;\n//   };\n//   textField.cancel = function() {\n//     cancelCalled++;\n//     return true;\n//   };\n\n//   textField.$().focus();\n//   equal(insertNewlineCalled+cancelCalled, 0, \"precond - no callbacks called yet\");\n\n//   Ember.RootResponder.responder.keyup(new Ember.Event({ type: 'keyup', keyCode: 13 }));\n//   equal(insertNewlineCalled, 1, \"calls insertNewline after hitting return\");\n\n//   Ember.RootResponder.responder.keyup(new Ember.Event({ type: 'keyup', keyCode: 27 }));\n//   equal(cancelCalled, 1, \"calls cancel after pressing escape key\");\n// });\n\n\n})();\n//@ sourceURL=ember-handlebars/~tests/controls/text_field_test");