minispade.register('ember-views/views/states/in_dom', "(function() {// ==========================================================================\n// Project:   Ember - JavaScript Application Framework\n// Copyright: ©2006-2011 Strobe Inc. and contributors.\n//            Portions ©2008-2011 Apple Inc. All rights reserved.\n// License:   Licensed under MIT license (see license.js)\n// ==========================================================================\nminispade.require('ember-views/views/states/default');\n\nvar get = Ember.get, set = Ember.set, meta = Ember.meta;\n\nEmber.View.states.hasElement = {\n  parentState: Ember.View.states._default,\n\n  $: function(view, sel) {\n    var elem = get(view, 'element');\n    return sel ? Ember.$(sel, elem) : Ember.$(elem);\n  },\n\n  getElement: function(view) {\n    var parent = get(view, 'parentView');\n    if (parent) { parent = get(parent, 'element'); }\n    if (parent) { return view.findElementInParentElement(parent); }\n    return Ember.$(\"#\" + get(view, 'elementId'))[0];\n  },\n\n  setElement: function(view, value) {\n    if (value === null) {\n      view.transitionTo('preRender');\n    } else {\n      throw \"You cannot set an element to a non-null value when the element is already in the DOM.\";\n    }\n\n    return value;\n  },\n\n  // once the view has been inserted into the DOM, rerendering is\n  // deferred to allow bindings to synchronize.\n  rerender: function(view) {\n    view._notifyWillRerender();\n\n    view.clearRenderedChildren();\n\n    view.domManager.replace(view);\n    return view;\n  },\n\n  // once the view is already in the DOM, destroying it removes it\n  // from the DOM, nukes its element, and puts it back into the\n  // preRender state if inDOM.\n\n  destroyElement: function(view) {\n    view._notifyWillDestroyElement();\n    view.domManager.remove(view);\n    view._lastInsert = null;\n    set(view, 'element', null);\n    return view;\n  },\n\n  empty: function(view) {\n    var _childViews = view._childViews, len, idx;\n    if (_childViews) {\n      len = _childViews.length;\n      for (idx = 0; idx < len; idx++) {\n        _childViews[idx]._notifyWillDestroyElement();\n      }\n    }\n    view.domManager.empty(view);\n  },\n\n  // Handle events from `Ember.EventDispatcher`\n  handleEvent: function(view, eventName, evt) {\n    if (view.has(eventName)) {\n      // Handler should be able to re-dispatch events, so we don't\n      // preventDefault or stopPropagation.\n      return view.trigger(eventName, evt);\n    } else {\n      return true; // continue event propagation\n    }\n  }\n};\n\nEmber.View.states.inDOM = {\n  parentState: Ember.View.states.hasElement,\n\n  insertElement: function(view, fn) {\n    if (view._lastInsert !== Ember.guidFor(fn)){\n      return;\n    }\n    throw \"You can't insert an element into the DOM that has already been inserted\";\n  }\n};\n\n})();\n//@ sourceURL=ember-views/views/states/in_dom");